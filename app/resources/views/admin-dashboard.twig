{% extends 'admin_layout.twig' %}

{% block content %}
	<div class="row" style="margin-top:1px;">
	<div class="col-lg-6 col-md-6 col-sm-12">
	<canvas id="subscriptionChart"></canvas>
	</div>
	<div class="col-lg-6 col-md-6 col-sm-12">
	<canvas id="myChart"></canvas>
	</div>
</div>

<h3 style="border-bottom:2px solid #778878;margin-bottom:3px;display: inline-block;padding-bottom: 10px;">Transaction Summary</h3>
		<div class="row" style="margin-top:10px;">
		<!-- Item -->
			<div class="col-lg-4 col-md-6"><a href="{{base_url()}}/manage-all-subscriptions">
				<div class="dashboard-stat color-bazi">
					<div class="dashboard-stat-content"><h4>{{page.data_stats.amountPaidTotal}} </h4> <span>Total Amount Received</span>
					<span style="display:inline;font-size: 15px;line-height: 18px;font-style: italic;">(in USD) </span></div>
					<div class="dashboard-stat-icon"><i class="im im-icon-Dollar"></i></div>
				</div></a>
			</div>
				<!-- Item -->
			<div class="col-lg-4 col-md-6"><a href="{{base_url()}}/manage-all-subscriptions">
				<div class="dashboard-stat color-bazi">
					<div class="dashboard-stat-content"><h4>{{page.data_stats.amountPaidOnline}} </h4> <span>Paid Online</span></div>
					<div class="dashboard-stat-icon"><i class="sl sl-icon-wallet"></i></div>
				</div></a>
			</div>
			<!-- Item -->
			<div class="col-lg-4 col-md-6"><a href="{{base_url()}}/manage-all-subscriptions">
				<div class="dashboard-stat color-bazi">
					<div class="dashboard-stat-content"><h4>{{page.data_stats.amountPaidManual}}</h4> <span>Manual Entry</span></div>
					<div class="dashboard-stat-icon"><i class="im im-icon-Double-Tap"></i> </div>
				</div></a>
			</div></div>
			

		<h3 style="border-bottom:2px solid #778878;margin-bottom:3px;display: inline-block;padding-bottom: 10px;">Active Subscriptions Summary</h3>	
		<div class="row" style="margin-top:10px;">
		<!-- Item -->
			<div class="col-lg-3 col-md-6"><a href="{{base_url()}}/manage-all-subscriptions">
				<div class="dashboard-stat color-bazi">
					<div class="dashboard-stat-content"><h4>{{page.data_stats.activeSubscribers}} </h4> <span>Total Active Subscriptions</span></div>
					<div class="dashboard-stat-icon"><i class="sl sl-icon-badge"></i></div>
				</div></a>
			</div>
			<!-- Item -->
			<div class="col-lg-3 col-md-6"><a href="{{base_url()}}/manage-all-subscriptions">
				<div class="dashboard-stat color-bazi">
					<div class="dashboard-stat-content"><h4>{{page.data_stats.currentMembersWithStarter}}</h4> <span>Starter Subscribers</span></div>
					
				</div></a>
			</div>
			<!-- Item -->
		<div class="col-lg-3 col-md-6"><a href="{{base_url()}}/manage-all-subscriptions">
				<div class="dashboard-stat color-bazi">
					<div class="dashboard-stat-content"><h4>{{page.data_stats.currentMembersWithPremium}}</h4> <span>Premium Subscribers</span></div>
				</div></a>
			</div>
			<!-- Item -->
			<div class="col-lg-3 col-md-6"><a href="{{base_url()}}/manage-all-subscriptions">
				<div class="dashboard-stat color-bazi">
					<div class="dashboard-stat-content"><h4>{{page.data_stats.currentMembersWithStudent}}</h4> <span>Student Subscribers</span></div>
				
				</div></a>
			</div>
			<!-- Item -->
			</div>
			

	<h3 style="border-bottom:2px solid #778878;margin-bottom:3px;display: inline-block;padding-bottom: 10px;">Users Summary</h3>	
<div class="row" style="margin-top:10px;">
    
    	<div class="col-lg-3 col-md-6"><a href="{{base_url()}}/manage-users">
				<div class="dashboard-stat color-bazi">
					<div class="dashboard-stat-content"><h4>{{page.data_stats.totalMembers}} </h4> <span>Total User Accounts</span></div>
					<div class="dashboard-stat-icon"><i class="sl sl-icon-people"></i></div>
				</div></a>
			</div>
			
				<div class="col-lg-3 col-md-6"><a href="{{base_url()}}/reward-points">
				<div class="dashboard-stat color-bazi">
				<div class="dashboard-stat-content"><h4>{{page.data_stats.totalRewardPoints}} </h4> <span>Total Reward Points</span>
				 {% if page.data_stats.numPeopleRewarded >0 %}	<span style="display:block;font-size: 15px;line-height: 18px;font-style: italic;">({{page.data_stats.numPeopleRewarded}} People Rewarded)</span> {% endif %}
				 </div>
				<div class="dashboard-stat-icon"><i class="sl sl sl-icon-wallet"></i></div>
				</div>
			</a></div>
			
				<div class="col-lg-3 col-md-6"><a href="{{base_url()}}/free-trials-summary">
				<div class="dashboard-stat color-bazi">
				<div class="dashboard-stat-content"><h4>{{page.data_stats.totalFreeTrials}} </h4> <span>Total Free Trials</span>
				 {% if page.data_stats.totalFreeTrialsActive >0 %}	<span style="display:block;font-size: 15px;line-height: 18px;font-style: italic;">({{page.data_stats.totalFreeTrialsActive}} Currently Active)</span> {% endif %}
				 </div>
				<div class="dashboard-stat-icon"><i class="sl sl sl-icon-plane"></i></div>
				</div>
			</a></div>
			
			
		<div class="col-lg-3 col-md-6"><a href="{{base_url()}}/contact-form-submissions">
				<div class="dashboard-stat color-bazi">
				<div class="dashboard-stat-content"><h4>{{page.data_stats.numTotalContacts}} </h4> <span>Received Messages</span></div>
				<div class="dashboard-stat-icon"><i class="sl sl-icon-envelope-open"></i></div>
				</div>
			</a></div>
			
		</div>


	<h3 style="border-bottom:2px solid #778878;margin-bottom:3px;display: inline-block;padding-bottom: 10px;">Resources Summary</h3>	
<div class="row" style="margin-top:10px;">
    
    	<div class="col-lg-4 col-md-6"><a href="{{base_url()}}/reviews">
				<div class="dashboard-stat color-bazi">
					<div class="dashboard-stat-content"><h4>{{page.data_stats.numDocReviews}} </h4> <span>User Reviews</span></div>
					<div class="dashboard-stat-icon"><i class="sl sl-icon-speech"></i></div>
				</div>
			</a></div>
			
    	<div class="col-lg-4 col-md-6"><a href="{{base_url()}}/bookmarks">
				<div class="dashboard-stat color-bazi">
					<div class="dashboard-stat-content"><h4>{{page.data_stats.numDocLikes}} </h4> <span>User Likes</span></div>
					<div class="dashboard-stat-icon"><i class="im im-icon-Love-User"></i></div>
				</div></a>
			</div>
			
			<div class="col-lg-4 col-md-6"><a href="{{base_url()}}/bookmarks">
				<div class="dashboard-stat color-bazi">
					<div class="dashboard-stat-content"><h4>{{page.data_stats.numDocSaves}} </h4> <span>Total Reads Saved</span></div>
					<div class="dashboard-stat-icon"><i class="im im-icon-Data-Cloud"></i></div>
				</div></a>
			</div>
			
			<!-- Item -->
			<div class="col-lg-4 col-md-6"><a href="{{base_url()}}/manage-documents">
				<div class="dashboard-stat color-bazi">
					<div class="dashboard-stat-content"><h4>{{page.data_stats.numEbooks}}</h4> <span>E-Books</span>
					 {% if page.data_stats.numEbooksPending >0 %}	<span style="display:block;font-size: 15px;line-height: 18px;font-style: italic;">({{page.data_stats.numEbooksPending}} Draft)</span> {% endif %}
					</div>
					<div class="dashboard-stat-icon"><i class="sl sl-icon-book-open"></i></div>
				</div></a>
			</div>
			
			<!-- Item -->
			<div class="col-lg-4 col-md-6"><a href="{{base_url()}}/manage-documents">
				<div class="dashboard-stat color-bazi">
					<div class="dashboard-stat-content"><h4>{{page.data_stats.numMagazines}} </h4> <span>Magazines</span>
					 {% if page.data_stats.numEbooksPending >0 %}<span style="display:block;font-size: 15px;line-height: 18px;font-style: italic;">({{page.data_stats.numMagazinesPending}} Draft)</span> {% endif %}</div>
					<div class="dashboard-stat-icon"><i class="sl sl-icon-layers"></i></div>
				</div></a>
			</div>
			
			<!-- Item -->
			<div class="col-lg-4 col-md-6"><a href="{{base_url()}}/manage-categories">
				<div class="dashboard-stat color-bazi">
					<div class="dashboard-stat-content"><h4>{{page.data_stats.numDocCategories}} </h4> <span>Categories</span>
					 {% if page.data_stats.numDocCategoriesDraft >0 %}<span style="display:block;font-size: 15px;line-height: 18px;font-style: italic;">({{page.data_stats.numDocCategoriesDraft}} Draft)</span> {% endif %}
					 </div>
					<div class="dashboard-stat-icon"><i class="sl sl-icon-tag"></i></div>
				</div></a>
			</div>
			
		</div>
		
<h3 style="border-bottom:2px solid #778878;margin-bottom:3px;display: inline-block;padding-bottom: 10px;">Last Transactions</h3>
<table id="example" class="table table-striped table-bordered" style="width:100%;margin-bottom:30px;background-color:#ffffff;margin-top:10px;">
        <thead>
            <tr>
             <th>Date</th>
            <th>Total Subscription Fees Paid</th>
            </tr>
        </thead>
        <tbody>
             {% for earningRow in page.data_stats.earningsArr %}
            <tr style="color:#333333;font-weight:bold;">
                <td>{{earningRow.date_end}}</td>
                <td>$ {{earningRow.earning}}</td>
            </tr>
           {% endfor %}
        </tbody>
    </table>
    
    
    <h3 style="border-bottom:2px solid #778878;margin-bottom:3px;display: inline-block;padding-bottom: 10px;">Country Wise User Summary</h3>
<table id="example" class="table table-striped table-bordered" style="width:100%;margin-bottom:30px;background-color:#ffffff;margin-top:10px;">
        <thead>
            <tr>
             <th>Country</th>
            <th>Number of Users</th>
            </tr>
        </thead>
        <tbody>
             {% for countryRow in page.data_stats.countries_stat %}
            <tr style="color:#333333;font-weight:bold;">
                <td>{{countryRow.country}}</td>
                <td> {{countryRow.numUsers}}</td>
            </tr>
           {% endfor %}
        </tbody>
    </table>
 
 
		
		<div class="row" style="margin-top:10px;">
			<!-- Copyrights -->
			<div class="col-md-12">
				<div class="copyrights">Â© 2017 - 2020 | BaziChic Chinese Metatphysics Consultancy | All Rights Reserved.</div>
			</div>
		</div>		
{% endblock content %}

{% block jsfooter %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.2/Chart.js"></script>
<script>
    var ctx = document.getElementById('myChart').getContext('2d');
    var chart = new Chart(ctx, {
    type: 'bar',
    data: {
        labels: ['E-Books', 'Magazines'],
        datasets: [{
            label: 'Published',
            backgroundColor: 'rgb(0, 255, 0)',
            borderColor: 'rgb(255, 99, 132)',
            data: [{{page.data_stats.numEbooks}}, {{page.data_stats.numMagazines}}]
        },
        {
            label: 'Draft',
            backgroundColor: 'rgb(255, 99, 0)',
            borderColor: 'rgb(255, 99, 132)',
            data: [{{page.data_stats.numEbooksPending}}, {{page.data_stats.numMagazinesPending}}]
        }]
    },
    options: {}
});


 var ctx = document.getElementById('subscriptionChart').getContext('2d');
    var chart = new Chart(ctx, {
    type: 'bar',
    data: {
        labels: ['Starter', 'Premium', 'Student', 'Total'],
        datasets: [{
            label: 'Active Subscribers',
            backgroundColor: 'rgb(255, 99, 255)',
            borderColor: 'rgb(255, 99, 0)',
            data: [{{page.data_stats.currentMembersWithStarter}}, {{page.data_stats.currentMembersWithPremium}}, {{page.data_stats.currentMembersWithStudent}}, {{page.data_stats.activeSubscribers}}]
        },
        {
            label: 'Total Subscriptions',
            backgroundColor: 'rgb(255, 0, 0)',
            borderColor: 'rgb(255, 99, 0)',
            data: [{{page.data_stats.totalMembersWithStarter}}, {{page.data_stats.totalMembersWithPremium}}, {{page.data_stats.totalMembersWithStudent}}, {{page.data_stats.totalSubscribers}}]
        }]
    },
    options: {}
});

</script>
{% endblock %}